---
import { t, type Locale } from '../../lib/i18n';
import { urlFor } from '../../lib/sanity';

interface Props {
  locale: Locale;
  members: any[];
}

const { locale, members } = Astro.props;

// Default team members if none from Sanity
const defaultMembers = [
  {
    name: 'Sothy Marek',
    role: { de: 'Direktor der kambodschanischen NGO', en: 'Director of the Cambodian NGO', kh: 'នាយកអង្គការកម្ពុជា' },
    description: { 
      de: 'Leitet die operative Arbeit vor Ort in Kambodscha.', 
      en: 'Leads the operational work on site in Cambodia.',
      kh: 'ដឹកនាំការងារប្រតិបត្តិការនៅកម្ពុជា។'
    }
  },
  {
    name: 'Petra Marek',
    role: { de: 'Organisation & Sozialarbeit', en: 'Organization & Social Work', kh: 'អង្គការ និងសង្គមកិច្ច' },
    description: { 
      de: 'Lebt seit mehr als 30 Jahren in Kambodscha und hat die NGO gemeinsam mit ihrem Mann aufgebaut.', 
      en: 'Has been living in Cambodia for over 30 years and built the NGO together with her husband.',
      kh: 'រស់នៅកម្ពុជាជាង 30 ឆ្នាំ និងបានបង្កើតអង្គការជាមួយប្តី។'
    }
  }
];

const displayMembers = members?.length > 0 ? members : defaultMembers;
---

<section id="team" class="section bg-white">
  <div class="container-custom">
    <!-- Section header -->
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-5xl font-heading font-bold text-bamboo-800 mb-8">
        {locale === 'de' ? 'Unser Team vor Ort' : locale === 'en' ? 'Our Team on Site' : 'ក្រុមរបស់យើងនៅកន្លែង'}
      </h2>
      <p class="text-earth-600 max-w-2xl mx-auto">
        {locale === 'de' 
          ? 'Unsere Arbeit wird getragen von einem engagierten Team aus rund zehn kambodschanischen Lehrer:innen und Mitarbeitenden.'
          : locale === 'en'
          ? 'Our work is carried by a dedicated team of about ten Cambodian teachers and staff members.'
          : 'ការងាររបស់យើងត្រូវបានអនុវត្តដោយក្រុមគ្រូបង្រៀន និងបុគ្គលិកកម្ពុជាប្រហែល 10 នាក់។'}
      </p>
    </div>

    <!-- Team members -->
    <div class="flex flex-wrap justify-center gap-8">
      {displayMembers.map((member) => (
        <div class="w-full sm:w-80 bg-white rounded-2xl shadow-lg overflow-hidden group hover:shadow-xl transition-shadow">
          <!-- Photo -->
          <div class="h-48 bg-gradient-to-br from-bamboo-400 to-bamboo-600 relative">
            {member.image ? (
              <img 
                src={urlFor(member.image).width(320).height(192).url()}
                alt={member.name}
                class="w-full h-full object-cover"
              />
            ) : (
              <div class="w-full h-full flex items-center justify-center">
                <svg class="w-16 h-16 text-white/50" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
              </div>
            )}
          </div>
          
          <!-- Info -->
          <div class="p-6">
            <h3 class="text-xl font-heading font-semibold text-bamboo-800 mb-1">
              {member.name}
            </h3>
            <p class="text-bamboo-600 text-sm font-medium mb-3">
              {t(member.role, locale)}
            </p>
            <p class="text-earth-600 text-sm leading-relaxed">
              {t(member.description, locale)}
            </p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
