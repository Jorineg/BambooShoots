---
import { t, type Locale } from '../../lib/i18n';
import { urlFor } from '../../lib/sanity';

interface Props {
  locale: Locale;
  members: any[];
}

const { locale, members } = Astro.props;

// Default team members if none from Sanity
const defaultMembers = [
  {
    name: 'Sothy Marek',
    role: { de: 'Direktor der kambodschanischen NGO', en: 'Director of the Cambodian NGO', kh: 'á“á¶á™á€á¢á„áŸ’á‚á€á¶ášá€á˜áŸ’á–á»á‡á¶' },
    description: { 
      de: 'Leitet die operative Arbeit vor Ort in Kambodscha.', 
      en: 'Leads the operational work on site in Cambodia.',
      kh: 'áŠá¹á€á“á¶áŸ†á€á¶ášá„á¶ášá”áŸ’ášáá·á”ááŸ’áá·á€á¶ášá“áŸ…á€á˜áŸ’á–á»á‡á¶áŸ”'
    }
  },
  {
    name: 'Petra Marek',
    role: { de: 'Organisation & Sozialarbeit', en: 'Organization & Social Work', kh: 'á¢á„áŸ’á‚á€á¶áš á“á·á„áŸá„áŸ’á‚á˜á€á·á…áŸ’á…' },
    description: { 
      de: 'Lebt seit mehr als 30 Jahren in Kambodscha und hat die NGO gemeinsam mit ihrem Mann aufgebaut.', 
      en: 'Has been living in Cambodia for over 30 years and built the NGO together with her husband.',
      kh: 'ášáŸáŸ‹á“áŸ…á€á˜áŸ’á–á»á‡á¶á‡á¶á„ 30 á†áŸ’á“á¶áŸ† á“á·á„á”á¶á“á”á„áŸ’á€á¾áá¢á„áŸ’á‚á€á¶ášá‡á¶á˜á½á™á”áŸ’áá¸áŸ”'
    }
  }
];

const displayMembers = members?.length > 0 ? members : defaultMembers;
---

<section id="team" class="section bg-earth-100">
  <div class="container-custom">
    <!-- Section header -->
    <div class="text-center mb-12">
      <span class="text-4xl mb-4 block">ğŸ‘¨â€ğŸ«</span>
      <h2 class="text-3xl md:text-4xl font-heading font-bold text-bamboo-800 mb-4">
        {locale === 'de' ? 'Unser Team vor Ort' : locale === 'en' ? 'Our Team on Site' : 'á€áŸ’ášá»á˜ášá”áŸáŸ‹á™á¾á„á“áŸ…á€á“áŸ’á›áŸ‚á„'}
      </h2>
      <div class="section-divider mb-6"></div>
      <p class="text-earth-600 max-w-2xl mx-auto">
        {locale === 'de' 
          ? 'Unsere Arbeit wird getragen von einem engagierten Team aus rund zehn kambodschanischen Lehrer:innen und Mitarbeitenden.'
          : locale === 'en'
          ? 'Our work is carried by a dedicated team of about ten Cambodian teachers and staff members.'
          : 'á€á¶ášá„á¶ášášá”áŸáŸ‹á™á¾á„ááŸ’ášá¼áœá”á¶á“á¢á“á»áœááŸ’ááŠáŸ„á™á€áŸ’ášá»á˜á‚áŸ’ášá¼á”á„áŸ’ášáŸ€á“ á“á·á„á”á»á‚áŸ’á‚á›á·á€á€á˜áŸ’á–á»á‡á¶á”áŸ’ášá áŸ‚á› 10 á“á¶á€áŸ‹áŸ”'}
      </p>
    </div>

    <!-- Team members -->
    <div class="flex flex-wrap justify-center gap-8">
      {displayMembers.map((member) => (
        <div class="w-full sm:w-80 bg-white rounded-2xl shadow-lg overflow-hidden group hover:shadow-xl transition-shadow">
          <!-- Photo -->
          <div class="h-48 bg-gradient-to-br from-bamboo-400 to-bamboo-600 relative">
            {member.image ? (
              <img 
                src={urlFor(member.image).width(320).height(192).url()}
                alt={member.name}
                class="w-full h-full object-cover"
              />
            ) : (
              <div class="w-full h-full flex items-center justify-center">
                <span class="text-6xl">ğŸ‘¤</span>
              </div>
            )}
          </div>
          
          <!-- Info -->
          <div class="p-6">
            <h3 class="text-xl font-heading font-semibold text-bamboo-800 mb-1">
              {member.name}
            </h3>
            <p class="text-bamboo-600 text-sm font-medium mb-3">
              {t(member.role, locale)}
            </p>
            <p class="text-earth-600 text-sm leading-relaxed">
              {t(member.description, locale)}
            </p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
