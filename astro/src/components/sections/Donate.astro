---
import { t, type Locale } from '../../lib/i18n';

interface Props {
  locale: Locale;
  tiers: any[];
  settings: any;
}

const { locale, tiers, settings } = Astro.props;

// Default donation tiers
const defaultTiers = [
  {
    amount: 35,
    title: { de: 'Vorschulplatz', en: 'Preschool Place', kh: 'á€á“áŸ’á›áŸ‚á„á˜ááŸ’ááŸá™áŸ’á™' },
    description: { 
      de: '5x pro Woche fÃ¼r einen Vorschulplatz â€“ inklusive Mahlzeit & Material',
      en: '5x per week for a preschool place â€“ including meal & materials',
      kh: '5 áŠá„/áŸá”áŸ’áá¶á áŸ áŸá˜áŸ’ášá¶á”áŸ‹á€á“áŸ’á›áŸ‚á„á˜ááŸ’ááŸá™áŸ’á™ â€“ ášá½á˜á‘á¶áŸ†á„á¢á¶á á¶áš á“á·á„áŸá˜áŸ’á—á¶ášáŸˆ'
    }
  },
  {
    amount: 15,
    title: { de: 'NachmittagsfÃ¶rderung', en: 'Afternoon Support', kh: 'á€á¶ášá‚á¶áŸ†á‘áŸ’ášá–áŸá›ášáŸáŸ€á›' },
    description: { 
      de: '3x pro Woche an zwei Standorten + Englisch â€“ inklusive Mahlzeit & Material',
      en: '3x per week at two locations + English â€“ including meal & materials',
      kh: '3 áŠá„/áŸá”áŸ’áá¶á áŸ á“áŸ…á–á¸ášá‘á¸áá¶áŸ†á„ + á¢á„áŸ‹á‚áŸ’á›áŸáŸ â€“ ášá½á˜á‘á¶áŸ†á„á¢á¶á á¶áš á“á·á„áŸá˜áŸ’á—á¶ášáŸˆ'
    }
  },
  {
    amount: null,
    title: { de: 'Krisenhilfe & Gemeindearbeit', en: 'Crisis Aid & Community Work', kh: 'á‡áŸ†á“á½á™áœá·á”ááŸ’áá· á“á·á„á€á¶ášá„á¶ášáŸá á‚á˜á“áŸ' },
    description: { 
      de: 'Freier Betrag fÃ¼r beispielsweise FahrrÃ¤der, Reis- oder Hygienepakete',
      en: 'Any amount for bicycles, rice or hygiene packages',
      kh: 'á…áŸ†á“á½á“áá¶á˜á½á™áŸá˜áŸ’ášá¶á”áŸ‹á€á„áŸ‹ á¢á„áŸ’á€áš á¬á€á‰áŸ’á…á”áŸ‹á¢á“á¶á˜áŸá™'
    }
  }
];

const displayTiers = tiers?.length > 0 ? tiers : defaultTiers;
---

<section id="spenden" class="section bg-gradient-to-br from-bamboo-700 via-bamboo-800 to-bamboo-900 text-white relative overflow-hidden">
  <!-- Background decoration -->
  <div class="absolute top-0 right-0 w-96 h-96 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2"></div>
  <div class="absolute bottom-0 left-0 w-64 h-64 bg-white/5 rounded-full translate-y-1/2 -translate-x-1/2"></div>

  <div class="container-custom relative z-10">
    <!-- Section header -->
    <div class="text-center mb-12">
      <span class="text-4xl mb-4 block">ğŸ’¸</span>
      <h2 class="text-3xl md:text-4xl font-heading font-bold mb-4">
        {locale === 'de' ? 'Spenden & Mitmachen' : locale === 'en' ? 'Donate & Get Involved' : 'á”ášá·á…áŸ’á…á¶á‚ á“á·á„á…á¼á›ášá½á˜'}
      </h2>
      <p class="text-bamboo-100 text-lg max-w-2xl mx-auto">
        {locale === 'de' 
          ? 'Ihre UnterstÃ¼tzung macht den Unterschied. Spenden Sie gezielt â€“ transparent und wirkungsvoll.'
          : locale === 'en'
          ? 'Your support makes the difference. Donate purposefully â€“ transparently and effectively.'
          : 'á€á¶ášá‚á¶áŸ†á‘áŸ’ášášá”áŸáŸ‹á¢áŸ’á“á€á”á„áŸ’á€á¾áá—á¶á–áá»áŸá‚áŸ’á“á¶áŸ” á”ášá·á…áŸ’á…á¶á‚áŠáŸ„á™á˜á¶á“á‚áŸ„á›á”áŸ†áá„áŸ”'}
      </p>
    </div>

    <!-- Donation tiers -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
      {displayTiers.map((tier, index) => (
        <div class={`bg-white/10 backdrop-blur-sm rounded-2xl p-6 md:p-8 border border-white/20 hover:bg-white/15 transition-all ${index === 0 ? 'ring-2 ring-khmer-400' : ''}`}>
          {index === 0 && (
            <div class="bg-khmer-500 text-white text-xs font-bold px-3 py-1 rounded-full inline-block mb-4">
              {locale === 'de' ? 'Beliebt' : locale === 'en' ? 'Popular' : 'á–áŸá‰á“á·á™á˜'}
            </div>
          )}
          
          <div class="text-3xl md:text-4xl font-heading font-bold mb-2">
            {tier.amount ? `${tier.amount} â‚¬` : (locale === 'de' ? 'Freier Betrag' : locale === 'en' ? 'Any Amount' : 'á…áŸ†á“á½á“áá¶á˜á½á™')}
          </div>
          
          <h3 class="text-lg font-semibold mb-3">
            {t(tier.title, locale)}
          </h3>
          
          <p class="text-bamboo-100 text-sm leading-relaxed">
            {t(tier.description, locale)}
          </p>
        </div>
      ))}
    </div>

    <!-- Donation links -->
    <div class="flex flex-wrap justify-center gap-4 mb-8">
      {settings?.donationLinks?.betterplace && (
        <a 
          href={settings.donationLinks.betterplace}
          target="_blank"
          rel="noopener noreferrer"
          class="btn-primary bg-white text-bamboo-700 hover:bg-earth-100 px-8"
        >
          {locale === 'de' ? 'Ãœber betterplace.org spenden' : locale === 'en' ? 'Donate via betterplace.org' : 'á”ášá·á…áŸ’á…á¶á‚áá¶á˜ betterplace.org'}
        </a>
      )}
      {settings?.donationLinks?.paypal && (
        <a 
          href={settings.donationLinks.paypal}
          target="_blank"
          rel="noopener noreferrer"
          class="btn-secondary border-white/30 text-white hover:bg-white/10"
        >
          {locale === 'de' ? 'Mit PayPal spenden' : locale === 'en' ? 'Donate with PayPal' : 'á”ášá·á…áŸ’á…á¶á‚á‡á¶á˜á½á™ PayPal'}
        </a>
      )}
    </div>

    <!-- Info text -->
    <div class="text-center text-bamboo-100 text-sm space-y-2">
      <p>
        {locale === 'de' 
          ? 'GefÃ¶rdert durch den deutschen Verein â€Bamboo Shoots e.V."'
          : locale === 'en'
          ? 'Supported by the German association "Bamboo Shoots e.V."'
          : 'á‚á¶áŸ†á‘áŸ’ášáŠáŸ„á™áŸá˜á¶á‚á˜á¢á¶á›áŸ’á›áºá˜áŸ‰á„áŸ‹ "Bamboo Shoots e.V."'}
      </p>
      <p class="text-bamboo-200">
        {locale === 'de' 
          ? 'Der FÃ¶rderverein wird ehrenamtlich gefÃ¼hrt. Ihre Spenden flieÃŸen direkt in die Projektarbeit vor Ort.'
          : locale === 'en'
          ? 'The support association is run on a volunteer basis. Your donations go directly to project work on site.'
          : 'áŸá˜á¶á‚á˜á‚á¶áŸ†á‘áŸ’ášááŸ’ášá¼áœá”á¶á“áŠáŸ†áá¾ášá€á¶ášáŠáŸ„á™áŸáŸ’á˜áŸá‚áŸ’ášá…á·ááŸ’ááŸ” á€á¶ášá”ášá·á…áŸ’á…á¶á‚ášá”áŸáŸ‹á¢áŸ’á“á€á‘áŸ…áŠáŸ„á™á•áŸ’á‘á¶á›áŸ‹á‘áŸ…á€á¶á“áŸ‹á€á¶ášá„á¶ášá‚á˜áŸ’ášáŸ„á„á“áŸ…á€á“áŸ’á›áŸ‚á„áŸ”'}
      </p>
    </div>
  </div>
</section>
