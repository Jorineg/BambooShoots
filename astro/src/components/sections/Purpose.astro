---
import { t, type Locale } from "../../lib/i18n";

interface Props {
  locale: Locale;
  welcomeData: any;
  missionData: any;
}

const { locale, welcomeData, missionData } = Astro.props;
---

<section
  id="mission"
  class="section bg-branding-bg relative overflow-hidden py-32 md:py-48"
>
  <!-- Subtle Glow -->
  <div
    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[120px] pointer-events-none"
  >
  </div>

  <div class="container-custom relative z-10">
    <div class="max-w-5xl mx-auto">
      <!-- Welcome Message -->
      <div class="reveal mb-32 border-l-[3px] border-primary/20 pl-8 md:pl-16">
        <p
          class="text-xl md:text-2xl lg:text-3xl font-heading font-extrabold text-branding-dark leading-[1.4] mb-8 tracking-tight max-w-4xl"
        >
          {t(welcomeData?.text, locale)}
        </p>
      </div>

      <!-- Mission Message -->
      <div
        class="reveal reveal-delay-200 border-l-[3px] border-secondary/20 pl-8 md:pl-16 ml-auto max-w-3xl"
      >
        <p
          class="text-3xl md:text-5xl lg:text-6xl font-heading font-extrabold text-gradient mb-10 leading-[1.1] tracking-tighter"
        >
          {
            locale === "de"
              ? "Bildung verändert Leben."
              : locale === "en"
                ? "Education changes lives."
                : "ការអប់រំផ្លាស់ប្តូរជីវិត។"
          }
        </p>

        <div class="space-y-6">
          <p
            class="text-base md:text-lg text-branding-muted leading-relaxed font-light italic"
          >
            "{
              t(missionData?.quote, locale) ||
                "Bildung ist die mächtigste Waffe, die man verwenden kann, um die Welt zu verändern."
            }"
          </p>
          <p
            class="text-lg md:text-xl text-branding-muted leading-relaxed font-light"
          >
            {t(missionData?.text, locale)}
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const observerOptions = {
    threshold: 0.1,
    rootMargin: "0px 0px -50px 0px",
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
      }
    });
  }, observerOptions);

  document.querySelectorAll(".reveal").forEach((el) => observer.observe(el));
</script>
