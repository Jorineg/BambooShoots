@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;500;600;700;800&family=Noto+Sans+Khmer:wght@300;400;500;600;700&family=Caveat:wght@400;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Brand Colors (RGB triplets) */
  --color-primary: 22 163 74;
  /* #16a34a */
  --color-primary-hover: 21 128 61;
  /* #15803d */
  --color-primary-active: 22 101 52;
  /* #166534 */

  --color-secondary: 220 110 90;
  /* Softer Red/Terracotta */
  --color-secondary-hover: 195 90 75;
  --color-secondary-active: 170 80 65;

  /* Neutrals & Text */
  --color-text-main: 90 70 60;
  /* #5a463c */
  --color-text-muted: 161 126 99;
  /* #a17e63 */
  --color-text-light: 243 239 233;
  /* #f3efe9 */

  /* Backgrounds */
  --color-bg-page: 243 239 233;
  /* Earth 100 #f3efe9 */
  --color-bg-accent: 229 221 210;
  /* Earth 200 #e5ddd2 */
  --color-bg-earth: 229 221 210;
  /* Earth 200 #e5ddd2 */
  --color-bg-dark: 20 83 45;
  /* #14532d */

  /* Header Heights */
  --header-height-mobile: 4rem;
  /* 64px */
  --header-height-desktop: 5rem;
  /* 80px */
}

@layer base {
  html {
    /* removed global smooth scroll to prevent jumpy navigation */
  }

  /* Only enable smooth scroll after page is loaded and ready */
  html.is-ready {
    scroll-behavior: smooth;
  }

  body {
    @apply font-sans antialiased;
    background-color: rgb(var(--color-bg-page));
    color: rgb(var(--color-text-main));
    font-weight: 300;
    /* Lighter default font weight for premium feel */
  }

  /* Khmer font for Cambodian text */
  html[lang="kh"] body {
    @apply font-khmer;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-heading font-extrabold tracking-tight;
  }
}

@layer components {

  /* Section spacing */
  .section {
    @apply py-16 md:py-32 px-6 md:px-8;
  }

  /* Container */
  .container-custom {
    @apply max-w-6xl mx-auto w-full px-6 md:px-8;
  }

  /* Button styles - Removed hover-lift, added refined states */
  .btn-primary {
    @apply inline-flex items-center justify-center px-6 py-3 font-semibold rounded-xl transition-all duration-300 ease-out shadow-sm hover:shadow-md active:scale-[0.98];
    background-color: rgb(var(--color-primary));
    color: white;
  }

  .btn-primary:hover {
    background-color: rgb(var(--color-primary-hover));
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center px-6 py-3 font-semibold rounded-xl border-2 transition-all duration-300 ease-out active:scale-[0.98];
    background-color: white;
    color: rgb(var(--color-primary));
    border-color: rgb(var(--color-primary));
  }

  .btn-secondary:hover {
    background-color: rgb(var(--color-bg-accent));
  }

  .btn-donate {
    @apply inline-flex items-center justify-center px-6 py-3 font-bold rounded-xl transition-all duration-300 ease-out shadow-sm hover:shadow-lg active:scale-[0.98];
    background-color: rgb(var(--color-secondary));
    color: white;
  }

  .btn-donate:hover {
    background-color: rgb(var(--color-secondary-hover));
    filter: brightness(1.05);
  }

  /* Card styles */
  .card {
    @apply rounded-[2rem] shadow-sm p-6 md:p-8 hover:shadow-md transition-all duration-500 border border-black/5;
    background-color: rgb(var(--color-bg-page));
  }

  /* Timeline item */
  .timeline-item {
    @apply relative pl-10 pb-12 last:pb-0;
  }

  /* The vertical line */
  .timeline-item::before {
    content: '';
    @apply absolute left-0 top-0 bottom-0 w-0.5;
    background-color: rgb(var(--color-primary));
    transform: translateX(-50%);
  }

  .timeline-item:first-child::before {
    @apply top-[calc(50%-1.5rem)];
  }

  .timeline-item:last-child::before {
    @apply bottom-1/2;
  }

  .timeline-dot {
    @apply absolute left-0 top-[calc(50%-1.5rem)] -translate-y-1/2 w-4 h-4 rounded-full -translate-x-1/2 ring-4 z-10;
    background-color: rgb(var(--color-primary));
    --tw-ring-color: rgb(var(--color-primary) / 0.1);
  }

  .timeline-item:last-child .timeline-dot {
    @apply top-1/2;
  }

  /* Navigation link */
  .nav-link {
    @apply font-medium transition-all duration-300 relative inline-block;
    color: rgb(var(--color-text-main));
  }

  .nav-link:after {
    content: '';
    @apply absolute bottom-0 left-0 w-0 h-0.5 transition-all duration-300;
    background-color: rgb(var(--color-primary));
  }

  .nav-link:hover {
    color: rgb(var(--color-primary));
  }

  .nav-link:hover:after {
    @apply w-full;
  }

  /* Language toggle */
  .lang-toggle {
    @apply inline-flex items-center gap-1 px-2 py-1 text-sm font-medium rounded-md transition-all duration-300;
    color: rgb(var(--color-text-muted));
  }

  .lang-toggle:hover {
    color: rgb(var(--color-primary));
    background-color: rgb(var(--color-bg-accent));
  }

  .lang-toggle.active {
    @apply font-bold;
    color: rgb(var(--color-primary));
    background-color: rgb(var(--color-bg-accent));
  }
}

@layer utilities {

  /* Text gradient */
  .text-gradient {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(to right, rgb(var(--color-primary)), rgb(var(--color-primary-hover)));
  }

  /* Glass effect - Upgraded */
  .glass {
    @apply backdrop-blur-xl transition-all duration-500;
    background-color: rgba(255, 255, 255, 0.7);
  }

  /* Reveal Framework */
  .reveal {
    opacity: 0;
    transform: translateY(30px);
    transition: all 1s cubic-bezier(0.16, 1, 0.3, 1);
    will-change: transform, opacity;
  }

  .reveal.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .reveal-delay-100 {
    transition-delay: 100ms;
  }

  .reveal-delay-200 {
    transition-delay: 200ms;
  }

  .reveal-delay-300 {
    transition-delay: 300ms;
  }

  .reveal-delay-400 {
    transition-delay: 400ms;
  }

  /* Utility Hover Patterns */
  .hover-lift {
    @apply transition-all duration-500 hover:shadow-xl active:scale-[0.99];
  }

  .hover-scale {
    @apply transition-transform duration-500 hover:scale-[1.02] active:scale-100;
  }

  .hover-zoom-container {
    @apply overflow-hidden;
  }

  .hover-zoom-container img {
    @apply transition-transform duration-700 ease-out;
  }

  .hover-zoom-container:hover img {
    @apply scale-110;
  }

  /* Glow Effects */
  .glow-soft {
    position: relative;
  }

  .glow-soft::before {
    content: '';
    position: absolute;
    inset: -10%;
    background: radial-gradient(circle, rgba(var(--color-primary), 0.05) 0%, transparent 70%);
    z-index: -1;
    pointer-events: none;
  }
}

@layer base {

  /* Synchronize all view transition layers (Header, Main, Root) */
  ::view-transition-group(*),
  ::view-transition-old(*),
  ::view-transition-new(*) {
    animation-duration: 0.3s;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }
}